# 初识Linux文件权限

> 作为一个Linux小白，刚接触CentOS对于文件权限的了解一片空白，在部署博客代码的过程中，也遇到很多关于文件权限的问题，
这迫使我去掌握一些Linux系统下关于文件权限的基础常识。

## 从最直观的开始
但我用`Xftp`工具连上我的云服务器，众多的文件夹后面都有一个属性字段，值类似 `drwxr-xr-x` ，该工具显示出的这一属性，其实就是Linux上的文件权限标识。

文件属性每一个位置上的字符含义如下：
- 第1位表示文件类型。`d`是目录文件，`l`是链接文件，`-`是普通文件，`p`是管道
- 第2-4位表示这个文件的属主拥有的权限，`r`是读，`w`是写，`x`是执行。
- 第5-7位表示和这个文件属主所在同一个组的用户所具有的权限。
- 第8-10位表示其他用户所具有的权限。

这个属性与我们在终端输入 `ls -l filename` 命令看到的相同：
```bash
[root@host wordpress]# ls -l wp-content
total 16
-rw-r--r-- 1 root root   28 Jan  9  2012 index.php
drwxr-xr-x 4 root root 4096 Dec  8 12:46 languages
drwxr-xr-x 3 root root 4096 Dec  8 12:46 plugins
drwxr-xr-x 5 root root 4096 Dec  8 12:46 themes
```
终端输出结果的每一列对应：文件属性 连接数 文件拥有者 所属群组 文件大小 文件修改时间 文件名

> 需要注意的是：查看文件权限的目录问题: 如果有文件夹 /a/b/c    
  那么执行 ls -l /a/b 查看权限的文件并不是b，而是查看的c的权限。

## 修改权限简介
确定了一个文件的访问权限后，用户可以利用Linux系统提供的`chmod`命令来重新设定不同的访问权限。也可以利用`chown`命令来更改某个文件或目录的所有者。
利用`chgrp`命令来更改某个文件或目录的用户组。

### chmod 命令 
**功能**  
chmod命令是非常重要的，用于改变文件或目录的访问权限.用户用它控制文件或目录的访问权限。  
**语法**  
该命令有两种用法。一种是包含字母和操作符表达式的文字设定法;另一种是包含数字的数字设定法。  

#### 1. 文字设定法
```bash
chmod [who] [+ | - | =] [mode] 文件名?
```
**参数**  
操作对象`who`可是下述字母中的任一个或者它们的组合：  
　　`u` 表示“用户(user)”，即文件或目录的所有者。  
　　`g` 表示“同组(group)用户”，即与文件属主有相同组ID的所有用户。  
　　`o` 表示“其他(others)用户”。  
　　`a` 表示“所有(all)用户”。它是系统默认值。  
   
操作符号可以是： 
　　`+` 添加某个权限。   
　　`-` 取消某个权限。  
　　`=` 赋予给定权限并取消其他所有权限(如果有的话)。  
     
设置mode所表示的权限可用下述字母的任意组合：  
　　`r` 可读。  
　　`w` 可写。  
　　`x` 可执行。  
　　`X` 只有目标文件对某些用户是可执行的或该目标文件是目录时才追加x 属性。  
　　`s` 在文件执行时把进程的属主或组ID置为该文件的文件属主。方式“u+s”设置文件的用 户ID位，“g+s”设置组ID位。  
　　`t` 保存程序的文本到交换设备上。  
　　`u` 与文件属主拥有一样的权限。  
　　`g` 与和文件属主同组的用户拥有一样的权限。  
　　`o` 与其他用户拥有一样的权限。  
    
文件名：以空格分开的要改变权限的文件列表，支持通配符。  
在一个命令行中可给出多个权限方式，其间用逗号隔开。例如：chmod g+r，o+r example
使同组和其他用户对文件example 有读权限。  

#### 2. 数字设定法

文件和目录的权限表示，是用rwx这三个字符来代表所有者、用户组和其他用户的权限。有时候，字符似乎过于麻烦，因此还有另外一种方法是以数字来表示权限，而且仅需三个数字。  
　　`r`: 对应数值4  
　　`w`: 对应数值2  
　　`x`：对应数值1  
　　`-`：对应数值0  
数字设定的关键是mode的取值：  
1.  我们将rwx看成二进制数，如果有则有1表示，没有则有0表示，那么rwx r-x r- -则可以表示成为：111 101 100再将其每三位转换成为一个十进制数，就是754。  
2.  也可以将其简单的理解为一种运算: (4+2+1) (4+1) (4)=754  
    
如果想一次修改某个目录下所有文件的权限，包括子目录中的文件权限也要修改，也就是说，要修改fileA文件夹的权限，fileA 文件中的子文件的权限也一并修改，要使用参数－R表示启动递归处理。

## 使用命令chown改变目录或文件的所有权
文件与目录不仅可以改变权限，其所有权及所属用户组也能修改，和设置权限类似，用户可以通过图形界面来设置，或执行chown命令来修改:  
```
chown 所有者:用户组 文件名
```
如：`chown user1:group1 test.txt` 将文件的所有者设置为user1，用户组为group1